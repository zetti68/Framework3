//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: /Users/Zetzsche/Development/SimarisCurves/com.itextpdf/src/com/itextpdf/text/pdf/PdfNumberTree.java
//

#line 1 "/Users/Zetzsche/Development/SimarisCurves/com.itextpdf/src/com/itextpdf/text/pdf/PdfNumberTree.java"

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "com/itextpdf/text/pdf/PdfArray.h"
#include "com/itextpdf/text/pdf/PdfDictionary.h"
#include "com/itextpdf/text/pdf/PdfIndirectObject.h"
#include "com/itextpdf/text/pdf/PdfIndirectReference.h"
#include "com/itextpdf/text/pdf/PdfName.h"
#include "com/itextpdf/text/pdf/PdfNumber.h"
#include "com/itextpdf/text/pdf/PdfNumberTree.h"
#include "com/itextpdf/text/pdf/PdfObject.h"
#include "com/itextpdf/text/pdf/PdfReader.h"
#include "com/itextpdf/text/pdf/PdfWriter.h"
#include "java/io/IOException.h"
#include "java/lang/Integer.h"
#include "java/lang/Math.h"
#include "java/util/Arrays.h"
#include "java/util/HashMap.h"
#include "java/util/Set.h"


#line 55
@implementation ComItextpdfTextPdfPdfNumberTree


#line 67
+ (ComItextpdfTextPdfPdfDictionary *)writeTreeWithJavaUtilHashMap:(JavaUtilHashMap *)items
                                  withComItextpdfTextPdfPdfWriter:(ComItextpdfTextPdfPdfWriter *)writer {
  
#line 68
  if ([((JavaUtilHashMap *) nil_chk(items)) isEmpty])
#line 69
  return nil;
  IOSObjectArray *numbers = [IOSObjectArray arrayWithLength:[items size] type:[IOSClass classWithClass:[JavaLangInteger class]]];
  numbers = [((id<JavaUtilSet>) nil_chk([items keySet])) toArrayWithNSObjectArray:numbers];
  [JavaUtilArrays sortWithNSObjectArray:numbers];
  if (((IOSObjectArray *) nil_chk(numbers))->size_ <= ComItextpdfTextPdfPdfNumberTree_leafSize) {
    ComItextpdfTextPdfPdfDictionary *dic = [[ComItextpdfTextPdfPdfDictionary alloc] init];
    ComItextpdfTextPdfPdfArray *ar = [[ComItextpdfTextPdfPdfArray alloc] init];
    for (jint k = 0; k < numbers->size_; ++k) {
      [ar addWithComItextpdfTextPdfPdfObject:[[ComItextpdfTextPdfPdfNumber alloc] initWithInt:[((JavaLangInteger *) nil_chk(IOSObjectArray_Get(numbers, k))) intValue]]];
      [ar addWithComItextpdfTextPdfPdfObject:[items getWithId:IOSObjectArray_Get(numbers, k)]];
    }
    [dic putWithComItextpdfTextPdfPdfName:ComItextpdfTextPdfPdfName_get_NUMS_() withComItextpdfTextPdfPdfObject:ar];
    return dic;
  }
  jint skip = ComItextpdfTextPdfPdfNumberTree_leafSize;
  IOSObjectArray *kids = [IOSObjectArray arrayWithLength:(numbers->size_ + ComItextpdfTextPdfPdfNumberTree_leafSize - 1) / ComItextpdfTextPdfPdfNumberTree_leafSize type:[IOSClass classWithClass:[ComItextpdfTextPdfPdfIndirectReference class]]];
  for (jint k = 0; k < kids->size_; ++k) {
    jint offset = k * ComItextpdfTextPdfPdfNumberTree_leafSize;
    jint end = [JavaLangMath minWithInt:offset + ComItextpdfTextPdfPdfNumberTree_leafSize withInt:numbers->size_];
    ComItextpdfTextPdfPdfDictionary *dic = [[ComItextpdfTextPdfPdfDictionary alloc] init];
    ComItextpdfTextPdfPdfArray *arr = [[ComItextpdfTextPdfPdfArray alloc] init];
    [arr addWithComItextpdfTextPdfPdfObject:[[ComItextpdfTextPdfPdfNumber alloc] initWithInt:[((JavaLangInteger *) nil_chk(IOSObjectArray_Get(numbers, offset))) intValue]]];
    [arr addWithComItextpdfTextPdfPdfObject:[[ComItextpdfTextPdfPdfNumber alloc] initWithInt:[((JavaLangInteger *) nil_chk(IOSObjectArray_Get(numbers, end - 1))) intValue]]];
    [dic putWithComItextpdfTextPdfPdfName:ComItextpdfTextPdfPdfName_get_LIMITS_() withComItextpdfTextPdfPdfObject:arr];
    arr = [[ComItextpdfTextPdfPdfArray alloc] init];
    for (; offset < end; ++offset) {
      [arr addWithComItextpdfTextPdfPdfObject:[[ComItextpdfTextPdfPdfNumber alloc] initWithInt:[((JavaLangInteger *) nil_chk(IOSObjectArray_Get(numbers, offset))) intValue]]];
      [arr addWithComItextpdfTextPdfPdfObject:[items getWithId:IOSObjectArray_Get(numbers, offset)]];
    }
    [dic putWithComItextpdfTextPdfPdfName:ComItextpdfTextPdfPdfName_get_NUMS_() withComItextpdfTextPdfPdfObject:arr];
    IOSObjectArray_Set(kids, k, [((ComItextpdfTextPdfPdfIndirectObject *) nil_chk([((ComItextpdfTextPdfPdfWriter *) nil_chk(writer)) addToBodyWithComItextpdfTextPdfPdfObject:dic])) getIndirectReference]);
  }
  jint top = kids->size_;
  while (YES) {
    if (top <= ComItextpdfTextPdfPdfNumberTree_leafSize) {
      ComItextpdfTextPdfPdfArray *arr = [[ComItextpdfTextPdfPdfArray alloc] init];
      for (jint k = 0; k < top; ++k)
#line 106
      [arr addWithComItextpdfTextPdfPdfObject:IOSObjectArray_Get(kids, k)];
      ComItextpdfTextPdfPdfDictionary *dic = [[ComItextpdfTextPdfPdfDictionary alloc] init];
      [dic putWithComItextpdfTextPdfPdfName:ComItextpdfTextPdfPdfName_get_KIDS_() withComItextpdfTextPdfPdfObject:arr];
      return dic;
    }
    skip *= ComItextpdfTextPdfPdfNumberTree_leafSize;
    jint tt = (numbers->size_ + skip - 1) / skip;
    for (jint k = 0; k < tt; ++k) {
      jint offset = k * ComItextpdfTextPdfPdfNumberTree_leafSize;
      jint end = [JavaLangMath minWithInt:offset + ComItextpdfTextPdfPdfNumberTree_leafSize withInt:top];
      ComItextpdfTextPdfPdfDictionary *dic = [[ComItextpdfTextPdfPdfDictionary alloc] init];
      ComItextpdfTextPdfPdfArray *arr = [[ComItextpdfTextPdfPdfArray alloc] init];
      [arr addWithComItextpdfTextPdfPdfObject:[[ComItextpdfTextPdfPdfNumber alloc] initWithInt:[((JavaLangInteger *) nil_chk(IOSObjectArray_Get(numbers, k * skip))) intValue]]];
      [arr addWithComItextpdfTextPdfPdfObject:[[ComItextpdfTextPdfPdfNumber alloc] initWithInt:[((JavaLangInteger *) nil_chk(IOSObjectArray_Get(numbers, [JavaLangMath minWithInt:(k + 1) * skip withInt:numbers->size_] - 1))) intValue]]];
      [dic putWithComItextpdfTextPdfPdfName:ComItextpdfTextPdfPdfName_get_LIMITS_() withComItextpdfTextPdfPdfObject:arr];
      arr = [[ComItextpdfTextPdfPdfArray alloc] init];
      for (; offset < end; ++offset) {
        [arr addWithComItextpdfTextPdfPdfObject:IOSObjectArray_Get(kids, offset)];
      }
      [dic putWithComItextpdfTextPdfPdfName:ComItextpdfTextPdfPdfName_get_KIDS_() withComItextpdfTextPdfPdfObject:arr];
      IOSObjectArray_Set(kids, k, [((ComItextpdfTextPdfPdfIndirectObject *) nil_chk([((ComItextpdfTextPdfPdfWriter *) nil_chk(writer)) addToBodyWithComItextpdfTextPdfPdfObject:dic])) getIndirectReference]);
    }
    top = tt;
  }
}


#line 132
+ (void)iterateItemsWithComItextpdfTextPdfPdfDictionary:(ComItextpdfTextPdfPdfDictionary *)dic
                                    withJavaUtilHashMap:(JavaUtilHashMap *)items {
  
#line 133
  ComItextpdfTextPdfPdfArray *nn = (ComItextpdfTextPdfPdfArray *) check_class_cast([ComItextpdfTextPdfPdfReader getPdfObjectReleaseWithComItextpdfTextPdfPdfObject:[((ComItextpdfTextPdfPdfDictionary *) nil_chk(dic)) getWithComItextpdfTextPdfPdfName:ComItextpdfTextPdfPdfName_get_NUMS_()]], [ComItextpdfTextPdfPdfArray class]);
  if (nn != nil) {
    for (jint k = 0; k < [nn size]; ++k) {
      ComItextpdfTextPdfPdfNumber *s = (ComItextpdfTextPdfPdfNumber *) check_class_cast([ComItextpdfTextPdfPdfReader getPdfObjectReleaseWithComItextpdfTextPdfPdfObject:[nn getPdfObjectWithInt:k++]], [ComItextpdfTextPdfPdfNumber class]);
      (void) [((JavaUtilHashMap *) nil_chk(items)) putWithId:[JavaLangInteger valueOfWithInt:[((ComItextpdfTextPdfPdfNumber *) nil_chk(s)) intValue]] withId:[nn getPdfObjectWithInt:k]];
    }
  }
  else if ((nn = (ComItextpdfTextPdfPdfArray *) check_class_cast([ComItextpdfTextPdfPdfReader getPdfObjectReleaseWithComItextpdfTextPdfPdfObject:[dic getWithComItextpdfTextPdfPdfName:ComItextpdfTextPdfPdfName_get_KIDS_()]], [ComItextpdfTextPdfPdfArray class])) != nil) {
    for (jint k = 0; k < [((ComItextpdfTextPdfPdfArray *) nil_chk(nn)) size]; ++k) {
      ComItextpdfTextPdfPdfDictionary *kid = (ComItextpdfTextPdfPdfDictionary *) check_class_cast([ComItextpdfTextPdfPdfReader getPdfObjectReleaseWithComItextpdfTextPdfPdfObject:[nn getPdfObjectWithInt:k]], [ComItextpdfTextPdfPdfDictionary class]);
      [ComItextpdfTextPdfPdfNumberTree iterateItemsWithComItextpdfTextPdfPdfDictionary:kid withJavaUtilHashMap:items];
    }
  }
}


#line 148
+ (JavaUtilHashMap *)readTreeWithComItextpdfTextPdfPdfDictionary:(ComItextpdfTextPdfPdfDictionary *)dic {
  
#line 149
  JavaUtilHashMap *items = [[JavaUtilHashMap alloc] init];
  if (dic != nil)
#line 151
  [ComItextpdfTextPdfPdfNumberTree iterateItemsWithComItextpdfTextPdfPdfDictionary:dic withJavaUtilHashMap:items];
  return items;
}

- (instancetype)init {
  return [super init];
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "writeTreeWithJavaUtilHashMap:withComItextpdfTextPdfPdfWriter:", "writeTree", "Lcom.itextpdf.text.pdf.PdfDictionary;", 0x9, "Ljava.io.IOException;" },
    { "iterateItemsWithComItextpdfTextPdfPdfDictionary:withJavaUtilHashMap:", "iterateItems", "V", 0xa, NULL },
    { "readTreeWithComItextpdfTextPdfPdfDictionary:", "readTree", "Ljava.util.HashMap;", 0x9, NULL },
    { "init", NULL, NULL, 0x1, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "leafSize_", NULL, 0x1a, "I", NULL, .constantValue.asInt = ComItextpdfTextPdfPdfNumberTree_leafSize },
  };
  static const J2ObjcClassInfo _ComItextpdfTextPdfPdfNumberTree = { "PdfNumberTree", "com.itextpdf.text.pdf", NULL, 0x1, 4, methods, 1, fields, 0, NULL};
  return &_ComItextpdfTextPdfPdfNumberTree;
}

@end
